<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaTanks - King of the Hill Evolution</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
            margin: 0;
        }
        
        .header p {
            color: #888;
            margin: 5px 0;
        }
        
        /* Evolution Control Bar */
        .evolution-control-bar {
            background: #222;
            border: 2px solid #00ff88;
            border-radius: 5px;
            padding: 10px 20px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .evolution-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .control-group label {
            color: #00ff88;
            font-size: 12px;
            white-space: nowrap;
        }
        
        .evolution-stats {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 12px;
            color: #ccc;
            flex-wrap: wrap;
        }
        
        .evolution-stats div {
            white-space: nowrap;
        }
        
        /* Disabled scenario selector styling */
        select:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #444 !important;
            color: #999 !important;
            border-color: #666 !important;
        }
        
        .game-container {
            display: flex;
            gap: 20px;
            height: calc(100vh - 180px);
        }
        
        .battlefield {
            flex: 1;
            border: 2px solid #00ff88;
            border-radius: 5px;
            background: #0a0a0a;
            position: relative;
        }
        
        .control-panel {
            width: 350px;
            background: #222;
            border-radius: 5px;
            padding: 15px;
            overflow-y: auto;
            overflow-x: hidden;
            box-sizing: border-box;
        }
        
        .panel-section {
            margin-bottom: 20px;
            border: 1px solid #444;
            border-radius: 3px;
            padding: 10px;
        }
        
        .panel-section h3 {
            color: #00ff88;
            margin: 0 0 10px 0;
            font-size: 14px;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
        }
        
        .stats {
            font-size: 12px;
            line-height: 1.4;
        }
        
        .team-red { color: #ff4444; }
        .team-blue { color: #4444ff; }
        
        button {
            background: #00ff88;
            color: black;
            border: none;
            padding: 8px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            margin: 2px;
        }
        
        button:hover {
            background: #00cc66;
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .evolution-log {
            max-height: 200px;
            overflow-y: auto;
            font-size: 11px;
            background: #111;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px;
        }
        
        .log-fitness { color: #ffaa00; }
        .log-mutation { color: #aa88ff; }
        .log-battle { color: #88ffaa; }
        
        /* API Key Configuration */
        .api-key-section {
            background: #2a2a2a;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 8px 12px;
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .api-key-input-group {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 250px;
        }
        
        .api-key-section label {
            color: #ffa500;
            font-size: 11px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .api-key-input {
            flex: 1;
            background: #333;
            border: 1px solid #666;
            color: white;
            padding: 4px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-family: monospace;
            min-width: 200px;
        }
        
        .api-key-input:focus {
            border-color: #00ff88;
            outline: none;
        }
        
        .api-key-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .api-key-status {
            font-size: 9px;
            color: #888;
            white-space: nowrap;
        }
        
        .api-key-status.connected {
            color: #00ff88;
        }
        
        .api-key-status.error {
            color: #ff6666;
        }
        
        .api-key-status.mock {
            color: #88ff88;
        }
        
        .mock-mode-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #333;
            padding: 4px 8px;
            border-radius: 3px;
            border: 1px solid #555;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .mock-mode-toggle:hover {
            background: #444;
        }
        
        .mock-mode-toggle input[type="checkbox"] {
            margin: 0;
        }
        
        .mock-mode-toggle label {
            font-size: 9px;
            color: #88ff88;
            cursor: pointer;
            margin: 0;
        }
        
        /* Responsive API Key Section */
        @media (max-width: 768px) {
            .api-key-section {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            
            .api-key-input-group {
                min-width: unset;
                flex-direction: column;
                align-items: stretch;
                gap: 4px;
            }
            
            .api-key-input-group label {
                align-self: flex-start;
            }
            
            .mock-mode-toggle {
                justify-content: center;
            }
        }
        
        /* ASI-ARCH Module Visualization */
        .asi-arch-modules {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }
        
        .module-status {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 8px;
            font-size: 11px;
        }
        
        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }
        
        .module-icon {
            margin-right: 6px;
            font-size: 14px;
        }
        
        .module-name {
            flex: 1;
            font-weight: bold;
            color: #00ff88;
        }
        
        .module-indicator {
            font-size: 12px;
            transition: color 0.3s;
        }
        
        .module-indicator.active {
            color: #00ff88;
            animation: pulse 2s infinite;
        }
        
        .module-indicator.working {
            color: #ffaa00;
            animation: pulse 1s infinite;
        }
        
        .module-tooltip {
            cursor: help;
            color: #888;
            margin-left: 4px;
            font-size: 10px;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .module-tooltip:hover {
            opacity: 1;
            color: #aaa;
        }
        
        .module-indicator.idle {
            color: #666;
        }
        
        .module-activity {
            color: #ccc;
            font-size: 10px;
            margin-bottom: 4px;
            min-height: 12px;
        }
        
        .module-stats {
            font-size: 10px;
            color: #888;
        }
        
        .module-stats div {
            margin: 1px 0;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        /* Credits Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal-content {
            background-color: #222;
            margin: 5% auto;
            padding: 20px;
            border: 2px solid #00ff88;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            color: white;
            font-family: 'Courier New', monospace;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            text-align: center;
            border-bottom: 1px solid #444;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .modal-header h2 {
            color: #00ff88;
            margin: 0;
            text-shadow: 0 0 10px #00ff88;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .close:hover,
        .close:focus {
            color: #00ff88;
            text-decoration: none;
        }
        
        .credits-section {
            margin-bottom: 20px;
        }
        
        .credits-section h3 {
            color: #00ff88;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .citation-box {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .research-link {
            color: #00ff88;
            text-decoration: none;
        }
        
        .research-link:hover {
            text-decoration: underline;
        }
        
        /* Genome Display */
        .genome-display {
            margin-top: 10px;
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 8px;
            font-size: 10px;
            width: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        .genome-header {
            color: #00ff88;
            font-weight: bold;
            margin-bottom: 8px;
            text-align: center;
            border-bottom: 1px solid #444;
            padding-bottom: 4px;
        }
        
        .genome-traits {
            display: flex;
            flex-direction: column;
            gap: 2px;
            font-family: monospace;
            font-size: 9px;
        }
        
        .genome-trait {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 2px 4px;
            background: #222;
            border-radius: 2px;
            margin: 1px 0;
            min-height: 16px;
            overflow: hidden;
        }
        
        .trait-name {
            color: #ccc;
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 4px;
        }
        
        .trait-value {
            color: #00ff88;
            font-weight: bold;
            min-width: 30px;
            text-align: right;
            margin-right: 4px;
        }
        
        .trait-bar {
            width: 30px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .trait-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #00ff88);
            transition: width 0.3s ease;
        }
        
        .genome-fitness {
            text-align: center;
            margin-top: 8px;
            padding: 4px;
            background: #333;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .fitness-red {
            color: #ff6666;
        }
        
        .fitness-blue {
            color: #6666ff;
        }
        
        /* Tactical Evolution Monitor Styles */
        .tactical-section {
            margin-bottom: 15px;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 8px;
            background: #1a1a1a;
        }
        
        .tactical-section h4 {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: #00ff88;
            text-align: center;
        }
        
        .team-stats {
            margin-bottom: 8px;
        }
        
        .team-red {
            color: #ff6666;
            font-weight: bold;
            font-size: 11px;
        }
        
        .team-blue {
            color: #6666ff;
            font-weight: bold;
            font-size: 11px;
        }
        
        .strategy-list, .champions-list {
            margin: 4px 0 0 15px;
            font-size: 10px;
            color: #ccc;
            line-height: 1.3;
        }
        
        .diversity-score {
            margin: 2px 0 0 15px;
            font-size: 10px;
            color: #aaa;
        }
        
        .innovation-stats, .complexity-stats {
            font-size: 10px;
            color: #ccc;
            margin-bottom: 5px;
        }
        
        .innovation-stats div, .complexity-stats div {
            margin: 2px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AlphaTanks: King of the Hill Evolution</h1>
        <p>Autonomous tank AI evolution inspired by ASI-ARCH methodology</p>
    </div>
    
    <!-- Evolution Control Bar -->
    <div class="evolution-control-bar">
        <div class="evolution-controls">
            <!-- Battle Scenario Selection -->
            <div class="control-group" style="margin-right: 15px;">
                <label for="scenarioSelector" style="color: #00ff88; font-weight: bold;">üéØ Battle Scenario:</label>
                <select id="scenarioSelector" style="background: #333; color: white; border: 1px solid #00ff88; padding: 3px 8px; border-radius: 3px; margin-left: 5px; transition: opacity 0.3s;">
                    <option value="open_field">üåæ Open Field Combat</option>
                    <option value="urban_warfare">üè¢ Urban Warfare</option>
                    <option value="chokepoint_control">üîí Chokepoint Defense</option>
                    <option value="fortress_assault">üè∞ Fortress Assault</option>
                </select>
            </div>
            
            <button id="startEvolution">Start Evolution</button>
            <button id="pauseEvolution">Pause</button>
            <button id="resetBattle">Reset Evolution</button>
            <button id="researcherInsightsButton">üî¨ Researcher Insights</button>
            <button id="engineerInsightsButton">‚öôÔ∏è Engineer Insights</button>
            <button id="analystInsightsButton">üìä Analyst Insights</button>
            <button id="cognitionInsightsButton">üß† Cognition Insights</button>
            <button id="creditsButton">Credits</button>
        </div>
        
        <div class="evolution-controls">
            <div class="control-group">
                <label>Speed:</label>
                <input type="range" id="speedSlider" min="0.1" max="5" step="0.1" value="1">
                <span id="speedValue">1x</span>
            </div>
            
            <div class="control-group">
                <label>Population:</label>
                <input type="number" id="populationSize" min="10" max="100" value="30">
            </div>
            
            <!-- API Key Configuration -->
            <div class="api-key-section">
                <div class="api-key-input-group">
                    <label for="apiKeyInput">üîë API Key:</label>
                    <input type="password" id="apiKeyInput" class="api-key-input" 
                           placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxx"
                           title="Enter your LLM API key to enable AI-powered insights">
                    <div id="apiKeyStatus" class="api-key-status">No key configured</div>
                </div>
                
                <div class="mock-mode-toggle" title="Use simulated AI responses instead of real API calls - perfect for testing">
                    <input type="checkbox" id="enableMockMode">
                    <label for="enableMockMode">üé≠ Mock Mode</label>
                </div>
            </div>
        </div>
        
        <div class="evolution-stats">
            <div id="generationDisplay">Generation: 1</div>
            <div>Battles: <span id="battles">0</span></div>
            <div>Total Experiments: <span id="experiments">0</span></div>
        </div>
    </div>
    
        <div class="game-container">
            <div class="battlefield">
                <canvas id="gameCanvas"></canvas>
            </div>        <div class="control-panel">
            <div class="panel-section">
                <h3>ASI-ARCH System Status</h3>
                <div style="font-size: 11px; color: #ff9900; margin-bottom: 8px;">
                    üèÅ Red Queen Race: Competitive Coevolution Active
                </div>
                <div class="asi-arch-modules">
                    <div class="module-status" id="researcherModule">
                        <div class="module-header">
                            <span class="module-icon">üî¨</span>
                            <span class="module-name">Researcher</span>
                            <span class="module-tooltip" title="The Researcher module autonomously proposes new tank behavioral architectures using genetic algorithms. It evolves tank genomes through crossover, mutation, and selection, implementing Red Queen competitive coevolution where teams continuously adapt to counter each other's strategies." style="cursor: help; color: #888; margin-left: 4px; font-size: 10px;">‚ùì</span>
                            <span class="module-indicator" id="researcherIndicator">‚óè</span>
                        </div>
                        <div class="module-activity" id="researcherActivity">Initializing...</div>
                        <div class="module-stats">
                            <div>Proposals: <span id="researcherProposals">0</span></div>
                            <div style="color: #ff6666;">üî¥ Red Mutations: <span id="researcherRedMutations">0</span></div>
                            <div style="color: #6666ff;">üîµ Blue Mutations: <span id="researcherBlueMutations">0</span></div>
                        </div>
                    </div>
                    
                    <div class="module-status" id="engineerModule">
                        <div class="module-header">
                            <span class="module-icon">‚öôÔ∏è</span>
                            <span class="module-name">Engineer</span>
                            <span class="module-tooltip" title="The Engineer module evaluates tank architectures through real combat testing. It runs actual battles, calculates fitness scores based on kill/death ratios and survival time, detects suboptimal behaviors, and provides multi-component performance metrics with Red Queen competitive weighting." style="cursor: help; color: #888; margin-left: 4px; font-size: 10px;">‚ùì</span>
                            <span class="module-indicator" id="engineerIndicator">‚óè</span>
                        </div>
                        <div class="module-activity" id="engineerActivity">Standby</div>
                        <div class="module-stats">
                            <div>Battles: <span id="engineerBattles">0</span></div>
                            <div style="color: #ff6666;">üî¥ Red Wins: <span id="engineerRedWins">0</span></div>
                            <div style="color: #6666ff;">üîµ Blue Wins: <span id="engineerBlueWins">0</span></div>
                        </div>
                    </div>
                    
                    <div class="module-status" id="analystModule">
                        <div class="module-header">
                            <span class="module-icon">üìä</span>
                            <span class="module-name">Analyst</span>
                            <span class="module-tooltip" title="The Analyst module generates strategic insights from experimental battle data. It performs pattern recognition to identify successful tactical combinations, tracks fitness evolution across generations, detects breakthrough performance improvements, and applies conditional learning when statistically significant." style="cursor: help; color: #888; margin-left: 4px; font-size: 10px;">‚ùì</span>
                            <span class="module-indicator" id="analystIndicator">‚óè</span>
                        </div>
                        <div class="module-activity" id="analystActivity">Ready</div>
                        <div class="module-stats">
                            <div>Insights: <span id="analystInsights">0</span></div>
                            <div style="color: #ff6666;">üî¥ Red Insights: <span id="analystRedInsights">0</span></div>
                            <div style="color: #6666ff;">üîµ Blue Insights: <span id="analystBlueInsights">0</span></div>
                        </div>
                    </div>
                    
                    <div class="module-status" id="cognitionModule">
                        <div class="module-header">
                            <span class="module-icon">üß†</span>
                            <span class="module-name">Cognition</span>
                            <span class="module-tooltip" title="The Cognition module applies military knowledge and meta-learning to tank behavior. It integrates a military knowledge base (phalanx, pincer, blitzkrieg, guerrilla tactics), implements meta-learning to improve learning effectiveness, applies strategic combat doctrine principles, and adapts learned patterns to new tactical situations." style="cursor: help; color: #888; margin-left: 4px; font-size: 10px;">‚ùì</span>
                            <span class="module-indicator" id="cognitionIndicator">‚óè</span>
                        </div>
                        <div class="module-activity" id="cognitionActivity">Knowledge base loaded</div>
                        <div class="module-stats">
                            <div>Base Tactics: <span id="cognitionTactics">4</span></div>
                            <div style="color: #ff6666;">üî¥ Red Tactics: <span id="cognitionRedTactics">0</span></div>
                            <div style="color: #6666ff;">üîµ Blue Tactics: <span id="cognitionBlueTactics">0</span></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>Team Statistics</h3>
                <div class="stats">
                    <div class="team-red">Red Team:</div>
                    <div>Wins: <span id="redWins">0</span></div>
                    <div>Avg Fitness: <span id="redFitness">0.0</span></div>
                    <div>Best Architecture: <span id="redBest">None</span></div>
                    
                    <div class="team-blue" style="margin-top: 10px;">Blue Team:</div>
                    <div>Wins: <span id="blueWins">0</span></div>
                    <div>Avg Fitness: <span id="blueFitness">0.0</span></div>
                    <div>Best Architecture: <span id="blueBest">None</span></div>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>üéØ Tactical Evolution Monitor</h3>
                
                <!-- Strategy Diversity Section -->
                <div id="strategy-diversity-sidebar" class="tactical-section">
                    <h4>üé≠ Strategy Diversity <span class="module-tooltip" title="Strategy Diversity measures the variety of tactical approaches in each team's candidate pool. It analyzes tank genomes and classifies them into distinct strategies (Sniper, Berserker, Support, Assassin, Adaptive, Fortress, Scout, etc.) based on behavioral traits like aggression, accuracy, teamwork, and evasion. Higher diversity indicates more varied tactical evolution and strategic flexibility." style="cursor: help; color: #888; margin-left: 4px; font-size: 10px;">‚ùì</span></h4>
                    <div id="strategy-diversity-content">
                        <div class="team-stats">
                            <div class="team-red">üî¥ Red Team Strategies:</div>
                            <div id="red-strategy-list" class="strategy-list">No data</div>
                            <div class="diversity-score">Diversity<span class="module-tooltip" title="Diversity percentage measures how varied the team's tactical approaches are. It's calculated as the ratio of unique strategy types to total candidates. 100% means all tanks use different strategies, while lower percentages indicate convergence on similar tactical approaches. Higher diversity suggests better evolutionary exploration and strategic adaptability." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="red-diversity">0%</span></div>
                        </div>
                        <div class="team-stats">
                            <div class="team-blue">üîµ Blue Team Strategies:</div>
                            <div id="blue-strategy-list" class="strategy-list">No data</div>
                            <div class="diversity-score">Diversity<span class="module-tooltip" title="Diversity percentage measures how varied the team's tactical approaches are. It's calculated as the ratio of unique strategy types to total candidates. 100% means all tanks use different strategies, while lower percentages indicate convergence on similar tactical approaches. Higher diversity suggests better evolutionary exploration and strategic adaptability." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="blue-diversity">0%</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Fitness Breakdown Section -->
                <div id="fitness-breakdown-sidebar" class="tactical-section">
                    <h4>üìä Top Performers</h4>
                    <div id="fitness-breakdown-content">
                        <div class="team-stats">
                            <div class="team-red">üî¥ Red Champions:</div>
                            <div id="red-champions" class="champions-list">No data</div>
                        </div>
                        <div class="team-stats">
                            <div class="team-blue">üîµ Blue Champions:</div>
                            <div id="blue-champions" class="champions-list">No data</div>
                        </div>
                    </div>
                </div>
                
                <!-- Innovation Metrics Section -->
                <div id="innovation-metrics-sidebar" class="tactical-section">
                    <h4>üí° Innovation Metrics</h4>
                    <div id="innovation-metrics-content">
                        <div class="innovation-stats">
                            <div>Generation: <span id="current-generation">1</span></div>
                            <div>Total Experiments: <span id="total-experiments">0</span></div>
                        </div>
                        <div class="team-stats">
                            <div class="team-red">üî¥ Red Innovation<span class="module-tooltip" title="Innovation percentage tracks how many tanks are using unconventional or experimental strategies. This includes unusual trait combinations like Pacifist tanks (low aggression, high defense+evasion), Kamikaze tanks (very high aggression, very low defense), high-Learning tanks, and Team Coordinators (high teamwork, low aggression). Higher innovation indicates more experimental evolution and creative tactical solutions." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="red-innovation">0%</span></div>
                            <div class="team-blue">üîµ Blue Innovation<span class="module-tooltip" title="Innovation percentage tracks how many tanks are using unconventional or experimental strategies. This includes unusual trait combinations like Pacifist tanks (low aggression, high defense+evasion), Kamikaze tanks (very high aggression, very low defense), high-Learning tanks, and Team Coordinators (high teamwork, low aggression). Higher innovation indicates more experimental evolution and creative tactical solutions." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="blue-innovation">0%</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Battle Complexity Section -->
                <div id="battle-complexity-sidebar" class="tactical-section">
                    <h4>‚öîÔ∏è Battle Analysis</h4>
                    <div id="battle-complexity-content">
                        <div class="complexity-stats">
                            <div>Last Battle Duration: <span id="last-battle-duration">-</span></div>
                            <div>Tactical Complexity: <span id="tactical-complexity">-</span></div>
                            <div>Hill Changes: <span id="hill-changes">-</span></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel-section">
                    <h3>Architecture Evolution</h3>
                    <div class="stats">
                        <div>Novel Designs<span class="module-tooltip" title="Novel Designs tracks the current candidate pool size - the number of unique tank architectures being evaluated in the current generation. This represents the breadth of genetic diversity available for evolution, with higher numbers indicating more experimental designs and evolutionary exploration." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="novelDesigns">0</span></div>
                        <div style="color: #ff6666;">üî¥ Red Adaptations<span class="module-tooltip" title="Red Adaptations counts successful mutations and evolutionary improvements for the red team. This tracks when genetic changes lead to fitness improvements, representing the team's ability to adapt and evolve better strategies over time. Higher numbers indicate more successful evolutionary progress." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="redAdaptations">0</span></div>
                        <div style="color: #6666ff;">üîµ Blue Adaptations<span class="module-tooltip" title="Blue Adaptations counts successful mutations and evolutionary improvements for the blue team. This tracks when genetic changes lead to fitness improvements, representing the team's ability to adapt and evolve better strategies over time. Higher numbers indicate more successful evolutionary progress." style="cursor: help; color: #888; margin-left: 3px; font-size: 9px;">‚ùì</span>: <span id="blueAdaptations">0</span></div>
                    </div>
                </div>            <div class="panel-section">
                <h3>Evolution Log</h3>
                <div id="evolutionLog" class="evolution-log">
                    <div class="log-entry">System initialized. Ready for evolution...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Credits Modal -->
    <div id="creditsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>üèÜ AlphaTanks Credits & Attribution</h2>
                <p>Autonomous AI Evolution Demonstration</p>
            </div>

            <div class="credits-section">
                <h3>üìö Research Foundation</h3>
                <p>This project demonstrates the <strong>ASI-ARCH</strong> (Artificial Superintelligence for AI Research) methodology in a tactical combat domain:</p>
                
                <div class="citation-box">
                    <strong>Primary Research Paper:</strong><br>
                    "Artificial Superintelligence for AI Research (ASI-ARCH):<br>
                    A Framework for Computational Research Scaling"<br><br>
                    
                    <strong>arXiv:</strong> <a href="https://arxiv.org/abs/2507.18074v1" class="research-link" target="_blank">2507.18074v1</a><br>
                    <strong>Year:</strong> 2024<br><br>
                    
                    <em>Available in project: <a href="2507.18074v1.pdf" class="research-link" target="_blank">2507.18074v1.pdf</a> and <a href="asi_arch_paper.txt" class="research-link" target="_blank">asi_arch_paper.txt</a></em>
                </div>
            </div>

            <div class="credits-section">
                <h3>üî¨ ASI-ARCH: Paper vs. Implementation</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <div style="background: rgba(255,200,100,0.1); padding: 12px; border-radius: 5px; border-left: 4px solid #ffc864;">
                        <h4 style="color: #ffc864; margin: 0 0 8px 0;">üìÑ Original Paper (Neural Architecture)</h4>
                        <ul style="font-size: 11px; margin: 5px 0; padding-left: 15px;">
                            <li><strong>Domain:</strong> Neural network architecture discovery</li>
                            <li><strong>Scale:</strong> 1,773 experiments, 20,000 GPU hours</li>
                            <li><strong>Goal:</strong> Discover novel linear attention architectures</li>
                            <li><strong>Output:</strong> 106 state-of-the-art neural architectures</li>
                            <li><strong>Validation:</strong> Large language model benchmarks</li>
                            <li><strong>Timeline:</strong> Computational months of research</li>
                        </ul>
                    </div>
                    <div style="background: rgba(0,255,136,0.1); padding: 12px; border-radius: 5px; border-left: 4px solid #00ff88;">
                        <h4 style="color: #00ff88; margin: 0 0 8px 0;">üéÆ AlphaTanks (Behavioral Evolution)</h4>
                        <ul style="font-size: 11px; margin: 5px 0; padding-left: 15px;">
                            <li><strong>Domain:</strong> Tactical combat behavior discovery</li>
                            <li><strong>Scale:</strong> Real-time evolution, minutes per generation</li>
                            <li><strong>Goal:</strong> Evolve tank AI combat strategies</li>
                            <li><strong>Output:</strong> Novel behavioral patterns and tactics</li>
                            <li><strong>Validation:</strong> Live combat performance metrics</li>
                            <li><strong>Timeline:</strong> Interactive real-time demonstration</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="credits-section">
                <h3>üß¨ ASI-ARCH Four-Module Implementation</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <div style="background: rgba(100,150,255,0.1); padding: 12px; border-radius: 5px;">
                        <h4 style="color: #6496ff; margin: 0 0 8px 0;">üìÑ Paper Implementation</h4>
                        <ul style="font-size: 11px; margin: 5px 0; padding-left: 15px;">
                            <li><strong>üî¨ Researcher:</strong> Proposes novel neural architectures using LLMs</li>
                            <li><strong>‚öôÔ∏è Engineer:</strong> Trains models on large datasets (1B-15B tokens)</li>
                            <li><strong>üìä Analyst:</strong> Evaluates on language modeling benchmarks</li>
                            <li><strong>üß† Cognition:</strong> Retrieves insights from 100+ research papers</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255,100,100,0.1); padding: 12px; border-radius: 5px;">
                        <h4 style="color: #ff6464; margin: 0 0 8px 0;">üéÆ AlphaTanks Adaptation</h4>
                        <ul style="font-size: 11px; margin: 5px 0; padding-left: 15px;">
                            <li><strong>üî¨ Researcher:</strong> Mutates tank behavioral genomes</li>
                            <li><strong>‚öôÔ∏è Engineer:</strong> Tests tactics in real-time combat scenarios</li>
                            <li><strong>üìä Analyst:</strong> Analyzes battle outcomes and tactical patterns</li>
                            <li><strong>üß† Cognition:</strong> Applies military strategy knowledge + LLM insights</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="credits-section">
                <h3>üöÄ Technical Innovation Highlights</h3>
                <div style="background: rgba(0,255,255,0.1); padding: 12px; border-radius: 5px; border-left: 4px solid #00ffff;">
                    <h4 style="color: #00ffff; margin: 0 0 8px 0;">üîë Key Adaptations for Interactive Demonstration</h4>
                    <ul style="font-size: 11px; margin: 5px 0; padding-left: 15px;">
                        <li><strong>Real-time Evolution:</strong> Seconds/minutes instead of hours/days</li>
                        <li><strong>Visual Feedback:</strong> Live battle visualization vs. text logs</li>
                        <li><strong>Red Queen Dynamics:</strong> Competitive coevolution between teams</li>
                        <li><strong>Multi-API Support:</strong> DeepSeek, OpenAI, Anthropic, Azure integration</li>
                        <li><strong>Secure API Management:</strong> User-provided keys, localStorage, mock mode</li>
                        <li><strong>Interactive Controls:</strong> Pause, reset, scenario selection</li>
                        <li><strong>Educational Focus:</strong> Accessible demonstration of ASI principles</li>
                    </ul>
                </div>
            </div>

            <div class="credits-section">
                <h3>üéØ Educational Impact & Scaling Laws</h3>
                <p>This implementation demonstrates key ASI-ARCH principles:</p>
                <ul style="font-size: 11px;">
                    <li><strong>Computational Scaling:</strong> More compute ‚Üí more discoveries (paper) vs. More battles ‚Üí better tactics (AlphaTanks)</li>
                    <li><strong>Emergent Intelligence:</strong> Unexpected design patterns emerge autonomously</li>
                    <li><strong>Self-Improving Systems:</strong> AI designs better AI through iterative enhancement</li>
                    <li><strong>Move 37 Moments:</strong> AI discovers strategies beyond human intuition</li>
                </ul>
                <p style="font-style: italic; color: #aaa; font-size: 11px; margin-top: 10px;">
                    "Like AlphaGo's Move 37 revealed strategic insights invisible to human players, 
                    both the paper's neural architectures and AlphaTanks' behavioral patterns 
                    demonstrate emergent design principles that systematically surpass human intuition."
                </p>
            </div>

            <div class="credits-section">
                <h3>üî¨ Academic Citation</h3>
                <div class="citation-box">
                    @article{asi_arch_2024,<br>
                    &nbsp;&nbsp;title={Artificial Superintelligence for AI Research (ASI-ARCH)},<br>
                    &nbsp;&nbsp;journal={arXiv preprint arXiv:2507.18074v1},<br>
                    &nbsp;&nbsp;year={2024}<br>
                    }<br><br>
                    
                    <strong>AlphaTanks Implementation:</strong><br>
                    @software{alphatanks_2024,<br>
                    &nbsp;&nbsp;title={AlphaTanks: ASI-ARCH Tactical Evolution Demonstration},<br>
                    &nbsp;&nbsp;url={https://github.com/KumquatPye2/AlphaTanks},<br>
                    &nbsp;&nbsp;year={2024}<br>
                    }
                </div>
            </div>

            <div class="credits-section">
                <h3>üõ†Ô∏è Technical Implementation</h3>
                <p><strong>Development Team:</strong> AlphaTanks Project<br>
                <strong>Language:</strong> JavaScript ES6+ with Web APIs<br>
                <strong>AI Integration:</strong> Multi-provider LLM support (DeepSeek, OpenAI, Anthropic, Azure)<br>
                <strong>Testing:</strong> Jest test suite (107+ comprehensive tests)<br>
                <strong>Code Quality:</strong> ESLint validation (zero errors)<br>
                <strong>Security:</strong> Client-side API key management with localStorage<br>
                <strong>License:</strong> MIT Open Source</p>
            </div>

            <div class="credits-section">
                <h3>üåü Research Impact & Future Directions</h3>
                <p><em>"This demonstration bridges the gap between theoretical ASI-ARCH research and practical AI evolution systems. 
                While the original paper focuses on neural architecture discovery at massive computational scale, 
                AlphaTanks proves that ASI principles can be adapted for real-time interactive demonstrations, 
                making advanced AI research concepts accessible to broader audiences while maintaining scientific rigor."</em></p>
                
                <p style="color: #00ff88; font-weight: bold; margin-top: 15px;">
                üöÄ <strong>Next Steps:</strong> Scaling from tactical evolution to strategic AI development
                </p>
            </div>
        </div>
    </div>
    
    
    <!-- Chart.js for professional charting -->
    <!-- Chart.js for visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- LLM Integration (DeepSeek) -->
    <script src="config.js?v=1754540001"></script>
    <script src="deepseek-client.js?v=1754540001"></script>
    <script src="api-key-manager.js"></script>
    <script src="llm-enhanced-asi-arch.js?v=1754541003"></script>
    <script src="asi-arch-integration.js?v=1754540001"></script>
    
    <!-- Core refactored modules (load first) -->
    <script src="core/data-collector.js?v=1754336875"></script>
    <script src="core/dashboard-ui.js?v=1754336875"></script>
    <script src="core/researcher-insights.js?v=1754336875"></script>
    <script src="core/engineer-insights.js?v=1754336875"></script>
    <script src="core/analyst-insights.js?v=1754336875"></script>
    <script src="core/cognition-insights.js?v=1754500007"></script>
    
    <!-- NEW: Tactical Evolution Display -->
    <script src="tactical-evolution-display.js?v=1754541005"></script>
    
    <!-- Refactored tank system -->
    <script src="refactored/common/constants.js"></script>
    <script src="refactored/common/utils.js"></script>
    <script src="refactored/ai/tank-entity.js"></script>
    <script src="refactored/ai/tank-ai.js"></script>
    <script src="refactored/ai/tank-combat.js"></script>
    <script src="refactored/ai/tank.js"></script>
    <script src="refactored/game/hill-control.js"></script>
    <script src="refactored/game/battle-managers.js"></script>
    <script src="refactored/game/game-engine.js"></script>
    
    <!-- Evolution and integration -->
    <script src="evolution-engine.js?v=1754541003"></script>
    <script src="asi-arch-modules.js?v=1754541003"></script>
    <script src="asi-arch-visualizer.js?v=1754336875"></script>
    
    <!-- Main application -->
    <script src="main.js?v=1754541005"></script>
    <!-- <script src="debug.js?v=1754336875"></script> -->
    <!-- <script src="test-validation.js"></script> -->
    
    <script>
        // Integration for refactored system with ASI-ARCH
        document.addEventListener('DOMContentLoaded', function() {
            // Compatibility layer for old main.js
            if (typeof gameEngine !== 'undefined') {
                window.game = gameEngine; // Backward compatibility
                
                // Add compatibility methods for ASI-ARCH modules
                if (!gameEngine.initializeKingOfHill) {
                    gameEngine.initializeKingOfHill = function() {
                        // Use the refactored initializeBattle method with 5 tanks per team
                        return this.initializeBattle(5, 5, 'king_of_hill');
                    };
                }
            }
            if (typeof evolutionEngine !== 'undefined') {
                window.evolution = evolutionEngine; // Backward compatibility
            }
            
            // Evolution engine is already initialized in main.js
            // Wire to game engine so battleEnd details flow to evolution
            if (evolutionEngine && gameEngine && typeof gameEngine.setEvolutionEngine === 'function') {
                gameEngine.setEvolutionEngine(evolutionEngine);
            }
            
            // Initialize ASI-ARCH integration (LLM-enhanced pipeline)
            if (typeof initializeASIArch === 'function') {
                try { window.asiArch = initializeASIArch(); } catch {}
            }
            
            // Add speed slider functionality
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            if (speedSlider && speedValue) {
                speedSlider.addEventListener('input', function(e) {
                    const speed = parseFloat(e.target.value);
                    speedValue.textContent = speed + 'x';
                    if (gameEngine && typeof gameEngine.setTimeScale === 'function') {
                        gameEngine.setTimeScale(speed);
                    }
                });
            }
            
            // Add population size control
            const populationSize = document.getElementById('populationSize');
            if (populationSize) {
                populationSize.addEventListener('change', function(e) {
                    if (gameEngine && typeof gameEngine.setPopulationSize === 'function') {
                        gameEngine.setPopulationSize(parseInt(e.target.value));
                    }
                });
            }
            
            // Auto-advance: process ASI-ARCH results, then let evolution engine handle next battle
            window.addEventListener('battleEnd', async (event) => {
                try {
                    const asi = window.asiArch || (typeof initializeASIArch === 'function' ? initializeASIArch() : null);
                    if (asi && typeof asi.processBattleResult === 'function' && gameEngine) {
                        await asi.processBattleResult(gameEngine.redTeam || [], gameEngine.blueTeam || [], event.detail);
                    }
                } catch (e) {
                    console.warn('ASI-ARCH processing failed:', e);
                }
                // Evolution engine handles its own battle flow via handleBattleEnd()
                // Manual quick battle system removed to prevent conflicts
            });
            
            // Application initialized - debug logging removed for performance
        });
    </script>
</body>
</html>
